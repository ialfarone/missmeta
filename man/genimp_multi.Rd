% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/genimp_multi.R
\name{genimp_multi}
\alias{genimp_multi}
\title{Flexible Imputation for Multivariate Meta-Analysis}
\usage{
genimp_multi(df, iter = 100, imps, effs, ses, cors = NULL, Ns = "N", imprho)
}
\arguments{
\item{df}{Data frame for meta-analysis with missing values (data.frame).}

\item{iter}{Number of imputed datasets to generate (numeric).}

\item{imps}{List of functions, each returning a numeric vector of length \code{n}, used to impute missing values
for each effect size (e.g., \code{list(imp1, imp2, imp3)}).}

\item{effs}{Character vector. Column names in \code{df} representing the effect sizes to be imputed (e.g., \code{c("eff1", "eff2", "eff3")}).}

\item{ses}{Character vector. Column names in \code{df} representing the standard errors associated with the effect sizes.}

\item{cors}{Optional character vector. Column names in \code{df} for within-study correlations between the effect sizes (e.g., \code{c("cor12", "cor13", "cor23")}).}

\item{Ns}{Character string. Column name in \code{df} representing the total sample size per study (e.g., \code{"N"}).}

\item{imprho}{Numeric scalar or vector. Imputed value(s) for within-study correlations if \code{cors} contain missing values.
If a scalar, the same value is used for all correlations. If a vector, must match the length of \code{cors}.}
}
\value{
A list of \code{iter} imputed data frames, with missing values replaced using user-specified models and multivariate draws.
}
\description{
Generates multiple imputed datasets for multivariate meta-analysis with missing effect sizes,
standard errors, and within-study correlations. The function allows user-defined imputation models
for multiple outcome variables (e.g., three different effect sizes) and imputes missing standard
errors using a multivariate log-normal model. Missing correlations are imputed with user-specified values.
}
\examples{
# Define dummy imputation functions
imp1 <- function(n) rnorm(n, 0, 1)
imp2 <- function(n) rnorm(n, 1, 1)
imp3 <- function(n) rnorm(n, 2, 1)

imps <- list(imp1, imp2, imp3)

# Create example dataset with missing values
set.seed(123)
df <- data.frame(
  eff1 = c(0.5, NA, 0.3, 0.7, 0.5, 0.2),
  eff2 = c(NA, 0.2, 0.3, 0.4, 0.2, 0.5),
  eff3 = c(0.1, 0.2, NA, 0.4, 0.9, 0.7),
  se1  = c(0.1, NA, 0.2, 0.15, 0.1, 0.3),
  se2  = c(NA, 0.25, 0.2, 0.2, 0.4, 0.2),
  se3  = c(0.05, 0.1, NA, 0.15, 0.4, 0.6),
  cor12 = c(NA, NA, 0.5, 0.7, 0.6, 0.6),
  cor13 = c(0.3, NA, NA, 0.6, 0.6, 0.5),
  cor23 = c(NA, 0.3, NA, 0.5, 0.6, 0.7),
  N = c(50, 60, 55, 45, 100, 62)
)

# Run the imputation
imp_data <- genimp_multi(
  df = df,
  iter = 10, # increase number of imputations
  imps = imps,
  effs = c("eff1", "eff2", "eff3"),
  ses = c("se1", "se2", "se3"),
  cors = c("cor12", "cor13", "cor23"),
  Ns = "N",
  imprho = c(0.7, 0.5, 0.6)
)

# View the first imputed dataset
head(imp_data[[1]])

}
